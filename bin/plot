#!/usr/local/bin/zsh -u

if [[ $# -lt 5 ]]; then
    echo 'file with lattice output size'
    exit 1
fi


file=$(readlink -f $1)
with=$2
lattice=$3
output=$4
size=$5

cd `dirname $0`

case "$output" in
    x)
        output="gen_x_plot"
        ;;
    pdf)
        output="gen_eps_plot"
        ;;
    *)
        echo "<|1|> Didn't match anything"
        exit 1
esac

echo "# "$file
head -n 1 $file
cat <(./$output $file $with) <(./plot_script $file $with $lattice $size)
